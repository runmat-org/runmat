[package]
name = "runmat-wasm"
version = "0.2.7"
edition = "2021"
authors = ["Dystr Team"]
license-file = "../../LICENSE.md"
description = "WebAssembly bindings for embedding RunMat in browsers"
homepage = "https://runmat.org"
repository = "https://github.com/runmat-org/runmat"

[lib]
crate-type = ["cdylib", "rlib"]

[features]
default = ["gpu"]
jit = ["runmat-core/jit"]
gpu = ["runmat-accelerate/wgpu"]

[dependencies]
runmat-core = { path = "../runmat-core", version = "=0.2.7", default-features = false }
runmat-builtins = { workspace = true }
runmat-accelerate = { workspace = true }
runmat-accelerate-api = { workspace = true }
runmat-filesystem = { path = "../runmat-filesystem", version = "=0.2.7" }
serde = { workspace = true }
serde_json = { workspace = true }
serde-wasm-bindgen = "0.6"
wasm-bindgen = { version = "0.2", features = ["serde-serialize"] }
wasm-bindgen-futures = "0.4"
js-sys = "0.3"
web-sys = { version = "0.3", features = ["Window", "Response", "ReadableStream", "ReadableStreamDefaultReader", "HtmlCanvasElement"] }
log = { workspace = true }
anyhow = { workspace = true }
console_error_panic_hook = "0.1"
wasm-logger = "0.2"
thiserror = { workspace = true }
getrandom = { version = "0.2", features = ["js"] }
uuid = { version = "1", features = ["v4", "js"], default-features = false }

[target.'cfg(target_arch = "wasm32")'.dependencies]
runmat-runtime = { path = "../runmat-runtime", version = "=0.2.7", default-features = false, features = ["plot-web"] }
runmat-plot = { path = "../runmat-plot", version = "=0.2.7", default-features = false, features = ["web"] }
