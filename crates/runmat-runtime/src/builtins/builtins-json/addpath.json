{
  "title": "addpath",
  "category": "io/repl_fs",
  "keywords": [
    "addpath",
    "search path",
    "matlab path",
    "-begin",
    "-end",
    "-frozen"
  ],
  "summary": "Add folders to the MATLAB search path used by RunMat.",
  "references": [
    "https://www.mathworks.com/help/matlab/ref/addpath.html"
  ],
  "gpu_support": {
    "elementwise": false,
    "reduction": false,
    "precisions": [],
    "broadcasting": "none",
    "notes": "Runs entirely on the CPU. gpuArray text inputs are gathered automatically before processing."
  },
  "fusion": {
    "elementwise": false,
    "reduction": false,
    "max_inputs": 8,
    "constants": "inline"
  },
  "requires_feature": null,
  "tested": {
    "unit": "builtins::io::repl_fs::addpath::tests",
    "integration": "builtins::io::repl_fs::addpath::tests::addpath_accepts_string_containers"
  },
  "description": "`addpath` prepends or appends folders to the MATLAB search path that RunMat consults when resolving functions, scripts, classes, and data files. The change affects the current session immediately, and the resulting ordering matches MATLAB semantics.",
  "behaviors": [
    "Folder arguments may be character vectors, string scalars, string arrays, or cell arrays of character vectors or strings. Multi-row char arrays contribute one folder per row (trailing padding is stripped).",
    "Multiple folders can be passed in a single argument using the platform path separator (`:` on Linux/macOS, `;` on Windows); this is compatible with `genpath`.",
    "By default, folders are added to the top of the search path. Use `'-end'` to append or `'-begin'` to force prepending explicitly. Only one position flag is permitted.",
    "The `'-frozen'` flag is accepted for MATLAB compatibility. RunMat does not currently track frozen entries separately; the flag simply suppresses incompatibility warnings.",
    "Duplicate entries are removed automatically so each folder appears at most once. On Windows, comparisons are case-insensitive.",
    "Inputs are resolved to absolute, canonicalised paths. Relative inputs are interpreted relative to the current working directory, and `~` expands to the user\u2019s home directory.",
    "Folders must exist. RunMat raises `addpath: folder '<name>' not found` when a directory is missing or `addpath: '<name>' is not a folder` when the target is not a directory."
  ],
  "examples": [
    {
      "description": "Add a single folder to the top of the search path",
      "input": "mkdir(\"util/toolbox\");\noldPath = path();\naddpath(\"util/toolbox\");\nnewPath = path();\nfprintf('%s\\n%s\\n', oldPath, newPath)",
      "output": "/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user /Users/testUser/runmat-project/util/toolbox:/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user"
    },
    {
      "description": "Append folders to the end of the search path",
      "input": "mkdir(\"shared/filters\");\nmkdir(\"shared/signal\");\noldPath = path();\ndirs = [\"shared/filters\", \"shared/signal\"];\naddpath(dirs, \"-end\");\nnewPath = path();\nfprintf('%s\\n%s\\n', oldPath, newPath)",
      "output": "/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user /Users/testUser/runmat/toolbox:/Users/testUser/runmat/user:/Users/testUser/runmat-project/shared/filters:/Users/testUser/runmat-project/shared/signal"
    },
    {
      "description": "Use `genpath` output to add a folder tree",
      "input": "mkdir(\"third_party/toolchain\");\nmkdir(\"third_party/toolchain/bin\");\noldPath = path();\ntoolchain = genpath(\"third_party/toolchain\");\naddpath(toolchain);\nnewPath = path();\nfprintf('%s\\n%s\\n', oldPath, newPath)",
      "output": "/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user /Users/testUser/runmat-project/third_party/toolchain:/Users/testUser/runmat-project/third_party/toolchain/bin:/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user"
    },
    {
      "description": "Add folders from a cell array",
      "input": "mkdir(\"src/algorithms\");\nmkdir(\"src/visualization\");\noldPath = path();\nfolders = {'src/algorithms', 'src/visualization'};\naddpath(folders{:}, \"-begin\");\nnewPath = path();\nfprintf('%s\\n%s\\n', oldPath, newPath)",
      "output": "/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user /Users/testUser/runmat-project/src/algorithms:/Users/testUser/runmat-project/src/visualization:/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user"
    },
    {
      "description": "Move an existing folder to the top of the search path",
      "input": "mkdir(\"src/algorithms\");\noldPath = path();\naddpath(\"src/algorithms\");\nnewPath = path();\nfprintf('%s\\n%s\\n', oldPath, newPath)",
      "output": "/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user /Users/testUser/runmat-project/src/algorithms:/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user"
    },
    {
      "description": "Accept the MATLAB `-frozen` flag",
      "input": "mkdir(\"vendor/hardware\");\noldPath = path();\naddpath(\"vendor/hardware\", \"-frozen\");\nnewPath = path();\nfprintf('%s\\n%s\\n', oldPath, newPath)",
      "output": "/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user /Users/testUser/runmat-project/vendor/hardware:/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user"
    },
    {
      "description": "Retrieve the previous path and restore it later",
      "input": "mkdir(\"analysis/utilities\");\noldPath = path();\nold = addpath(\"analysis/utilities\");\nnewPath = path();\npath(old);\nfprintf('%s\\n%s\\n', oldPath, newPath)",
      "output": "/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user /Users/testUser/runmat-project/analysis/utilities:/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user"
    },
    {
      "description": "Combine multiple options",
      "input": "mkdir(\"contrib\");\nmkdir(\"docs/examples\");\noldPath = path();\naddpath(\"contrib\", \"docs/examples\", \"-end\", \"-frozen\");\nnewPath = path();\nfprintf('%s\\n%s\\n', oldPath, newPath)",
      "output": "/Users/testUser/runmat/toolbox:/Users/testUser/runmat/user /Users/testUser/runmat/toolbox:/Users/testUser/runmat/user:/Users/testUser/runmat-project/contrib:/Users/testUser/runmat-project/docs/examples"
    }
  ],
  "faqs": [
    {
      "question": "Does `addpath` insist on absolute paths?",
      "answer": "No. Relative inputs are resolved against the current working directory and stored as absolute paths."
    },
    {
      "question": "What happens with duplicate folders?",
      "answer": "Existing occurrences are removed before the new ordering is applied, so each folder appears only once."
    },
    {
      "question": "How do I append instead of prepend?",
      "answer": "Supply `'-end'` as the final argument. Use `'-begin'` to force prepending explicitly."
    },
    {
      "question": "Is `-frozen` supported?",
      "answer": "The flag is accepted for MATLAB compatibility. RunMat currently treats it as a no-op but plans to integrate tighter tooling once savepath support lands."
    },
    {
      "question": "Can I load `pathdef.m` directly?",
      "answer": "Not yet. RunMat will add parity support in a future release. For now, evaluate the file manually and pass the resulting character vector to `path`."
    },
    {
      "question": "Do folders need to exist?",
      "answer": "Yes. RunMat validates that every entry exists and is a directory before updating the search path."
    },
    {
      "question": "Will `addpath` accept GPU strings?",
      "answer": "Yes. Inputs are gathered automatically, then processed on the CPU."
    },
    {
      "question": "Does `addpath` return the new path?",
      "answer": "Like MATLAB, `addpath` returns the previous path so it can be restored later with `path(old)`."
    }
  ],
  "links": [
    {
      "label": "path",
      "url": "./path"
    },
    {
      "label": "rmpath",
      "url": "https://www.mathworks.com/help/matlab/ref/rmpath.html"
    },
    {
      "label": "genpath",
      "url": "https://www.mathworks.com/help/matlab/ref/genpath.html"
    },
    {
      "label": "which",
      "url": "./which"
    },
    {
      "label": "exist",
      "url": "./exist"
    }
  ],
  "source": {
    "label": "`crates/runmat-runtime/src/builtins/io/repl_fs/addpath.rs`",
    "url": "https://github.com/runmat-org/runmat/blob/main/crates/runmat-runtime/src/builtins/io/repl_fs/addpath.rs"
  },
  "gpu_residency": "No. `addpath` operates entirely on CPU-side strings. Supplying `gpuArray` text inputs offers no benefit\u2014RunMat gathers them automatically.",
  "gpu_behavior": [
    "`addpath` manipulates host-side configuration. If any input value resides on the GPU, RunMat gathers it back to the host before parsing. No acceleration provider hooks or kernels are involved."
  ]
}
